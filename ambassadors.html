<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Youth Ambassadors – NHG Youth</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --border: rgba(255,255,255,.10);
      --shadow: 0 18px 50px rgba(0,0,0,.35);

      --primary: #2D63FF;
      --primary2:#4B7BFF;
      --accent: #76E4FF;
      --good: #5DE4A5;

      --radius-xl: 22px;
      --radius-lg: 18px;
      --radius-md: 14px;

      --container: 1120px;
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background:#ffffff;
      color:#0f172a;
    }

    a{ color:inherit; text-decoration:none; }
    button{ font-family:inherit; cursor:pointer; }

    .container{
      width: min(var(--container), calc(100% - 40px));
      margin: 0 auto;
    }

    /* ===== NAVBAR (auth like index) ===== */
    .topbar{
      position: sticky;
      top: 0;
      z-index: 50;
      backdrop-filter: blur(10px);
      background: rgba(11,18,32,.70);
      border-bottom: 1px solid var(--border);
      color:#fff;
    }
    .topbar-inner{
      height:64px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:14px;
    }
    .brand{
      display:flex;
      align-items:center;
      gap:10px;
      font-weight:800;
    }
    .logo{
      width:44px;height:44px;border-radius:10px;
      background: radial-gradient(circle at 30% 30%, var(--accent), var(--primary));
      box-shadow: 0 10px 26px rgba(45,99,255,.35);
      overflow:hidden;
      flex: 0 0 auto;
      display:grid;
      place-items:center;
    }
    .logo img{
      width:100%;
      height:100%;
      object-fit: cover;
      display:block;
    }

    .footerlogo{
      width:34px;height:34px;border-radius:10px;
      background: radial-gradient(circle at 30% 30%, var(--accent), var(--primary));
      box-shadow: 0 10px 26px rgba(45,99,255,.35);
    }

    .nav{
      display:flex;
      gap:18px;
      align-items:center;
      font-weight:600;
      font-size:14px;
      color: rgba(255,255,255,.72);
    }
    .nav a{ padding:10px;border-radius:10px; }
    .nav a:hover{ background: rgba(255,255,255,.06); color:#fff; }

    .actions{ display:flex; gap:10px; align-items:center; }
    .btn{
      border:1px solid var(--border);
      background: rgba(255,255,255,.04);
      color:#fff;
      padding:10px 14px;
      border-radius:12px;
      font-weight:700;
      font-size:14px;
      transition: transform .12s ease, background .12s ease, border-color .12s ease;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      cursor:pointer;
    }
    .btn:hover{
      transform: translateY(-1px);
      background: rgba(255,255,255,.07);
      border-color: rgba(255,255,255,.18);
    }
    .btn-primary{
      background: linear-gradient(90deg, var(--primary), var(--primary2));
      border:0;
      box-shadow: 0 14px 36px rgba(45,99,255,.35);
    }
    .btn-primary:hover{ background: linear-gradient(90deg, #2A5BFF, #4F82FF); }

    .hamburger{
      display:none;
      width:42px;height:42px;border-radius:12px;
      border:1px solid var(--border);
      background: rgba(255,255,255,.04);
      color:#fff;
      cursor:pointer;
    }

    /* ✅ IMPORTANT: hide mobile menu on desktop to avoid the double-row issue */
    .mobile-nav{
      display:none;
      padding: 12px 0 14px;
      border-top: 1px solid var(--border);
    }
    .mobile-nav a{
      display:block;
      padding: 10px 4px;
      color: rgba(255,255,255,.72);
      font-weight:700;
    }
    .mobile-nav a:hover{ color:#fff; }
    .mobile-nav.show{ display:block; }

    /* ===== PAGE HERO ===== */
    .pageHero{
      background: linear-gradient(90deg, #1E4DFF 0%, #2D63FF 45%, #2A5BFF 100%);
      color:#fff;
      box-shadow: var(--shadow);
    }
    .pageHero .container{ padding: 56px 0; }
    .pageHero h1{
      margin:0 0 12px;
      font-size: clamp(28px, 3.5vw, 44px);
      letter-spacing:-.8px;
    }
    .pageHero p{
      margin:0;
      max-width: 75ch;
      font-size:14px;
      line-height:1.8;
      color: rgba(255,255,255,.88);
      font-weight:600;
    }

    section{ padding: 36px 0; }

    .section-head{
      margin-bottom:18px;
    }
    .section-head h2{
      margin:0 0 6px;
      font-size:20px;
      letter-spacing:-.3px;
    }
    .section-head p{
      margin:0;
      color:#64748b;
      font-size:13px;
      font-weight:600;
      max-width:72ch;
    }

    /* ===== GRID ===== */
    .grid-3{
      display:grid;
      grid-template-columns: repeat(3,1fr);
      gap:16px;
    }

    .card{
      border:1px solid #e6eaf2;
      border-radius: var(--radius-lg);
      padding:18px;
      background:#fff;
      box-shadow: 0 10px 26px rgba(15,23,42,.08);
      display:flex;
      flex-direction:column;
      gap:10px;
    }
    .card h3{ margin:0;font-size:15px; }
    .card p{ margin:0;font-size:13px;color:#475569;font-weight:600;line-height:1.55; }

    .pill{
      display:inline-block;
      padding:7px 10px;
      border-radius:999px;
      font-size:12px;
      font-weight:800;
      background: rgba(45,99,255,.08);
      color: var(--primary);
      border:1px solid rgba(45,99,255,.25);
      width: fit-content;
    }

    /* ===== APPLY PANEL ===== */
    .apply{
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap:18px;
      margin-top:18px;
    }
    .panel{
      border:1px solid #e6eaf2;
      border-radius: var(--radius-xl);
      padding:20px;
      background:#fff;
      box-shadow: 0 12px 30px rgba(15,23,42,.08);
    }
    .list{
      margin:12px 0 0;
      padding:0;
      list-style:none;
      display:grid;
      gap:10px;
      font-size:13px;
      font-weight:600;
      color:#475569;
    }

    /* ===== FOOTER (same) ===== */
    footer{
      background:#0b1220;
      color: rgba(255,255,255,.82);
      margin-top:40px;
    }
    .footer__inner{
      padding:28px 0;
      display:grid;
      grid-template-columns: 1.4fr 1fr 1fr .9fr;
      gap:26px;
    }
    .footer__brandRow{
      display:flex;
      align-items:center;
      gap:10px;
      margin-bottom:10px;
    }
    .footer__desc{
      font-size:12px;
      color: rgba(255,255,255,.58);
      font-weight:600;
      max-width:34ch;
      margin:0;
    }
    .footerCol h5{
      margin:0 0 10px;
      font-size:12px;
      font-weight:900;
      color: rgba(255,255,255,.86);
    }
    .footerCol a:not(.socialBtn){
      display:block;
      font-size:12px;
      padding:6px 0;
      color: rgba(255,255,255,.58);
      font-weight:600;
    }
    .footerCol a:hover{ color:#fff; }

    .footerBottom{
      border-top:1px solid rgba(255,255,255,.08);
      padding:12px 0;
      font-size:11px;
      color: rgba(255,255,255,.45);
      display:flex;
      justify-content:space-between;
      gap:12px;
      flex-wrap:wrap;
    }

    /* ===== Footer social icons (Connect) ===== */
    .footer__social{
      display:flex;
      gap: 10px;
      align-items:center;
      justify-content:flex-start;
      margin-top: 2px;
    }

    .footerCol a.socialBtn{
      width: 28px;
      height: 28px;
      display:grid;
      place-items:center;
      padding: 0;
      margin: 0;
      border-radius: 8px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      color: rgba(255,255,255,.78);
    }

    .footerCol a.socialBtn:hover{
      background: rgba(255,255,255,.08);
      color:#fff;
    }

    .footerCol a.socialBtn svg{
      display:block;
      width:14px;
      height:14px;
    }

    /* =========================
       ✅ POPUP MODAL FORM
       ========================= */
    .modalOverlay{
      position: fixed;
      inset: 0;
      background: rgba(15,23,42,.55);
      backdrop-filter: blur(4px);
      display: none;
      align-items: center;
      justify-content: center;
      padding: 22px;
      z-index: 200;
    }
    .modalOverlay.show{ display:flex; }

    .modal{
      width: min(560px, 100%);
      background: #fff;
      border-radius: 18px;
      border: 1px solid #e6eaf2;
      box-shadow: 0 30px 90px rgba(15,23,42,.35);
      padding: 22px 22px 18px;
      position: relative;
    }
    .modalClose{
      position:absolute;
      top: 14px;
      right: 14px;
      width: 38px;
      height: 38px;
      border-radius: 12px;
      border: 1px solid #e6eaf2;
      background: #fff;
      font-weight: 900;
      color: rgba(15,23,42,.65);
    }
    .modalClose:hover{
      background: #f8fafc;
      color:#0f172a;
    }

    .modalHead{
      text-align:center;
      padding: 6px 10px 14px;
    }
    .modalHead h3{
      margin: 0 0 6px;
      font-size: 22px;
      font-weight: 950;
      letter-spacing: -.4px;
    }
    .modalHead p{
      margin: 0;
      font-size: 12px;
      font-weight: 700;
      color: rgba(15,23,42,.60);
    }

    .form{
      max-width: 360px;
      margin: 0 auto;
      display:grid;
      gap: 14px;
      padding: 2px 10px 10px;
    }
    .field label{
      display:block;
      font-size: 13px;
      font-weight: 900;
      margin: 0 0 6px;
      color:#0f172a;
    }
    .input{
      width:100%;
      border: 1px solid rgba(15,23,42,.25);
      border-radius: 8px;
      padding: 10px 10px;
      font-size: 13px;
      font-weight: 650;
      outline:none;
    }
    .input::placeholder{ color: rgba(15,23,42,.45); font-weight: 650; }
    .input:focus{
      border-color: rgba(45,99,255,.65);
      box-shadow: 0 0 0 4px rgba(45,99,255,.12);
    }

    .formError{
      display:none;
      border: 1px solid rgba(239,68,68,.25);
      background: rgba(239,68,68,.06);
      color: #b91c1c;
      border-radius: 12px;
      padding: 10px 12px;
      font-weight: 800;
      font-size: 12px;
      line-height: 1.5;
      max-width: 360px;
      margin: 0 auto;
    }

    .submitBtn{
      width: fit-content;
      justify-self: center;
      border: 0;
      background: linear-gradient(90deg, var(--primary), var(--primary2));
      color:#fff;
      padding: 10px 14px;
      border-radius: 6px;
      font-weight: 900;
      font-size: 12px;
      box-shadow: 0 14px 36px rgba(45,99,255,.28);
    }
    .submitBtn:disabled{ opacity:.55; cursor:not-allowed; box-shadow:none; }

    .successMsg{
      display:none;
      border: 1px solid rgba(34,197,94,.25);
      background: rgba(34,197,94,.07);
      color: #166534;
      border-radius: 12px;
      padding: 10px 12px;
      font-weight: 850;
      font-size: 12.5px;
      line-height: 1.5;
      max-width: 360px;
      margin: 10px auto 0;
      text-align:center;
    }

    @media(max-width:900px){
      .grid-3{ grid-template-columns:1fr; }
      .apply{ grid-template-columns:1fr; }
      .footer__inner{ grid-template-columns:1fr 1fr; }
    }
    @media(max-width:980px){
      .nav{ display:none; }
      .hamburger{ display:inline-flex; align-items:center; justify-content:center; }
    }
    @media(max-width:520px){
      .footer__inner{ grid-template-columns:1fr; }
      .form{ padding-left: 0; padding-right: 0; }
    }
  </style>
</head>

<body>

<!-- NAVBAR -->
<header class="topbar">
  <div class="container">
    <div class="topbar-inner">
      <a class="brand" href="index.html">
        <div class="logo" aria-hidden="true">
          <img src="ProjectThriveLogo.jpg" alt="Project Thrive Logo"/>
        </div>
        <span>Project Thrive</span>
      </a>

      <nav class="nav" aria-label="Primary">
        <a href="events.html">Events</a>
        <a href="hybrid-learning.html">Hybrid Learning</a>
        <a href="rewardsPage.html">Rewards</a>
        <a href="ambassadors.html">Ambassadors</a>
      </nav>

      <!-- ✅ ONLY auth buttons now -->
      <div class="actions">
        <a class="btn btn-primary" id="navSignIn" href="login.html">Sign in</a>
        <button class="btn" type="button" id="navLogout" title="Logout">Logout</button>

        <button class="hamburger" type="button" id="hamburger" aria-label="Open menu">☰</button>
      </div>
    </div>

    <!-- Mobile nav -->
    <div class="mobile-nav" id="mobileNav" aria-label="Mobile">
      <a href="events.html" onclick="closeMobileNav()">Events</a>
      <a href="hybrid-learning.html" onclick="closeMobileNav()">Hybrid Learning</a>
      <a href="rewardsPage.html" onclick="closeMobileNav()">Rewards</a>
      <a href="ambassadors.html" onclick="closeMobileNav()">Ambassadors</a>

      <a href="login.html" id="mNavSignIn" onclick="closeMobileNav()">Sign in</a>
    </div>
  </div>
</header>


<!-- HERO -->
<div class="pageHero">
  <div class="container">
    <h1>Youth Ambassadors</h1>
    <p>
      Be the bridge between youth and wellbeing. Lead quick activities, support events,
      and make health conversations relatable — while earning CCA points and leadership experience.
    </p>
  </div>
</div>

<main>

  <!-- ROLES -->
  <section id="roles">
    <div class="container">
      <div class="section-head">
        <h2>What Youth Ambassadors Do</h2>
        <p>Clear, bite-sized responsibilities to ensure consistency and quality across events.</p>
      </div>

      <div class="grid-3">
        <div class="card">
          <span class="pill">Pop-ups</span>
          <h3>Host Drop-in Activities</h3>
          <p>Facilitate 10–20 minute wellness missions at schools, community clubs, and public spaces.</p>
        </div>

        <div class="card">
          <span class="pill">Workshops</span>
          <h3>Support Hands-on Sessions</h3>
          <p>Assist trainers during fitness, nutrition, and lifestyle workshops using gamified formats.</p>
        </div>

        <div class="card">
          <span class="pill">Community</span>
          <h3>Peer Engagement</h3>
          <p>Encourage participation, answer questions, and gather feedback to improve activities.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- APPLY -->
  <section id="apply">
    <div class="container">
      <div class="section-head">
        <h2>Apply to Be an Ambassador</h2>
        <p>A structured role with training, clear commitments, and recognised contributions.</p>
      </div>

      <div class="apply">
        <div class="panel">
          <h3>What You’ll Gain</h3>
          <ul class="list">
            <li>✔ CCA / portfolio recognition</li>
            <li>✔ Leadership & facilitation skills</li>
            <li>✔ Exposure to community health initiatives</li>
            <li>✔ Certificates and programme badges</li>
          </ul>

          <div style="height:16px"></div>

          <!-- ✅ Open popup -->
          <button class="btn btn-primary" id="openAmbassadorForm" type="button">
            Apply Now →
          </button>
        </div>

        <div class="panel">
          <h3>Commitment & Training</h3>
          <ul class="list">
            <li>• Short training briefing before events</li>
            <li>• Flexible sign-up based on availability</li>
            <li>• Standardised facilitation guides</li>
            <li>• Ongoing support from NHG coordinators</li>
          </ul>
        </div>
      </div>
    </div>
  </section>

</main>

<!-- ✅ POPUP MODAL -->
<div class="modalOverlay" id="modalOverlay" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
  <div class="modal" role="document">
    <button class="modalClose" id="closeModalBtn" type="button" aria-label="Close">✕</button>

    <div class="modalHead">
      <h3 id="modalTitle">Register Your Interest</h3>
      <p>Takes less than 1 minute. No long term commitment.</p>
    </div>

    <div class="formError" id="formError"></div>

    <form class="form" id="ambassadorForm" novalidate>
      <div class="field">
        <label for="fullName">Full name</label>
        <input class="input" id="fullName" name="fullName" type="text" placeholder="e.g. Lim Yong Xin" required />
      </div>

      <div class="field">
        <label for="email">Email</label>
        <input class="input" id="email" name="email" type="email" placeholder="example@gmail.com" required />
      </div>

      <div class="field">
        <label for="school">School / Workplace</label>
        <input class="input" id="school" name="school" type="text" placeholder="e.g. Nanyang Technological University" required />
      </div>

      <div class="field">
        <label for="telegram">Telegram Handle (*optional)</label>
        <input class="input" id="telegram" name="telegram" type="text" placeholder="@YourName" />
      </div>

      <button class="submitBtn" id="submitBtn" type="submit" disabled>
        Sign up as Youth Ambassador
      </button>
    </form>

    <div class="successMsg" id="successMsg">
      Submitted! We’ll reach out soon.
    </div>
  </div>
</div>

<!-- FOOTER -->
<footer>
  <div class="container">
    <div class="footer__inner">
      <div>
        <div class="footer__brandRow">
          <div class="logo" style="width:28px;height:28px;">
            <img class="footerlogo" src="ProjectThriveLogo.jpg" alt="Project Thrive Logo"/>
          </div>
          <strong>Project Thrive</strong>
        </div>
        <p class="footer__desc">
          Empowering Singapore’s youth through innovative health programmes and community engagement.
        </p>
      </div>

      <div class="footerCol">
        <h5>Programme</h5>
        <a href="events.html">Events</a>
        <a href="hybrid-learning.html">Hybrid Learning</a>
        <a href="rewardsPage.html">Rewards</a>
        <a href="ambassadors.html">Ambassadors</a>
      </div>

      <div class="footerCol">
        <h5>Support</h5>
        <a href="#">Help Centre</a>
        <a href="#">Contact</a>
        <a href="#">FAQ</a>
      </div>

      <div class="footerCol">
        <h5>Connect</h5>
        <div class="footer__social" aria-label="Social links">
          <a class="socialBtn" href="https://www.instagram.com/project_.thrive?utm_source=ig_web_button_share_sheet&igsh=ZDNlZDc0MzIxNw==" target="_blank" rel="noopener noreferrer" aria-label="Instagram">
            <svg viewBox="0 0 24 24" fill="none">
              <path d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5Z" stroke="currentColor" stroke-width="2"/>
              <path d="M12 17a5 5 0 1 0 0-10 5 5 0 0 0 0 10Z" stroke="currentColor" stroke-width="2"/>
              <path d="M17.5 6.5h.01" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
            </svg>
          </a>

          <a class="socialBtn" href="https://www.tiktok.com/@project.thrive0?is_from_webapp=1&sender_device=pc" target="_blank" rel="noopener noreferrer" aria-label="TikTok">
            <svg viewBox="0 0 24 24" fill="none">
              <path d="M14 3v10.5a4.5 4.5 0 1 1-4-4.47" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              <path d="M14 3c1.3 2.2 3.2 3.6 6 3.9" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </a>

          
          <a class="socialBtn" href="https://t.me/ProjectThrive" target="_blank" rel="noopener noreferrer" aria-label="Telegram">
            <svg viewBox="0 0 24 24" fill="none">
              <!-- Paper plane -->
              <path d="M21 5L10 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M21 5L15 21L10 12L3 9L21 5Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
              <!-- Optional small tail detail -->
              <path d="M10 12L15 9" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </a>

        </div>
      </div>

    </div>

    <div class="footerBottom">
      <span>© <span id="year"></span> Project Thrive</span>
    </div>
  </div>
</footer>

<script src="pt-firebase.js"></script>

<script>
  document.getElementById("year").textContent = new Date().getFullYear();

  // ===== Mobile nav =====
  const hamburger = document.getElementById("hamburger");
  const mobileNav = document.getElementById("mobileNav");
  function closeMobileNav(){ mobileNav?.classList.remove("show"); }
  hamburger?.addEventListener("click", () => mobileNav.classList.toggle("show"));

  // ===== Auth UI (Sign in / Logout) =====
  PT.applyNavAuthUI({
    signInId: "navSignIn",
    logoutId: "navLogout",
    showWhenLoggedInIds: [],
    logoutRedirect: "login.html"
  });

  // Mobile "Sign in" link toggle
  const mSignIn = document.getElementById("mNavSignIn");
  if (mSignIn) mSignIn.style.display = PT.isLoggedIn() ? "none" : "block";

  // ===== Modal open/close + form =====
  const overlay = document.getElementById("modalOverlay");
  const openBtn = document.getElementById("openAmbassadorForm");
  const closeBtn = document.getElementById("closeModalBtn");

  const form = document.getElementById("ambassadorForm");
  const submitBtn = document.getElementById("submitBtn");
  const errorBox = document.getElementById("formError");
  const successMsg = document.getElementById("successMsg");

  const fullName = document.getElementById("fullName");
  const email = document.getElementById("email");
  const school = document.getElementById("school");      // ✅ do NOT autofill
  const telegram = document.getElementById("telegram");  // ✅ do NOT autofill

  let lastFocusedEl = null;

  async function openModal(){
    lastFocusedEl = document.activeElement;
    overlay.classList.add("show");
    document.body.style.overflow = "hidden";
    errorBox.style.display = "none";
    errorBox.textContent = "";
    successMsg.style.display = "none";

    // ✅ Reset only the fields we WANT to autofill each time
    // (leave school/telegram untouched so user can keep typing if they reopen)
    fullName.value = "";
    email.value = "";

    // ✅ If logged in, auto-fill Full name + Email from profile
    try{
      if (PT.isLoggedIn()){
        if (PT.ensureUser) await PT.ensureUser(); // safe
        if (PT.getProfile){
          const profile = await PT.getProfile();
          if (profile){
            if (profile.name) fullName.value = profile.name;
            if (profile.email) email.value = profile.email;
          }
        }
      }
    } catch(err){
      console.warn("Ambassador autofill failed:", err);
      // silently fall back to manual entry
    }

    validateLive();

    // Focus: if logged in, go to School/Workplace (since name/email filled). Else focus name.
    setTimeout(() => {
      if (PT.isLoggedIn()) school.focus();
      else fullName.focus();
    }, 0);
  }

  function closeModal(){
    overlay.classList.remove("show");
    document.body.style.overflow = "";
    if (lastFocusedEl) lastFocusedEl.focus();
  }

  openBtn.addEventListener("click", openModal);
  closeBtn.addEventListener("click", closeModal);

  overlay.addEventListener("click", (e) => {
    if (e.target === overlay) closeModal();
  });

  document.addEventListener("keydown", (e) => {
    if (e.key === "Escape" && overlay.classList.contains("show")) closeModal();
  });

  overlay.addEventListener("keydown", (e) => {
    if (e.key !== "Tab") return;
    const focusables = overlay.querySelectorAll('button, input, select, textarea, a[href], [tabindex]:not([tabindex="-1"])');
    const list = Array.from(focusables).filter(el => !el.disabled && el.offsetParent !== null);
    if (list.length === 0) return;

    const first = list[0];
    const last = list[list.length - 1];

    if (e.shiftKey && document.activeElement === first){
      e.preventDefault();
      last.focus();
    } else if (!e.shiftKey && document.activeElement === last){
      e.preventDefault();
      first.focus();
    }
  });

  function isEmailValid(val){
    return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(val.trim());
  }

  function validateLive(){
    const nameOk = fullName.value.trim().length >= 2;
    const emailOk = isEmailValid(email.value);
    const schoolOk = school.value.trim().length >= 2;

    submitBtn.disabled = !(nameOk && emailOk && schoolOk);
    return { nameOk, emailOk, schoolOk };
  }

  [fullName, email, school, telegram].forEach(el => {
    el.addEventListener("input", () => {
      errorBox.style.display = "none";
      errorBox.textContent = "";
      validateLive();
    });
  });

  form.addEventListener("submit", (e) => {
    e.preventDefault();
    const v = validateLive();

    if (!v.nameOk || !v.emailOk || !v.schoolOk){
      errorBox.textContent = "Please fill in Full name, a valid Email, and School/Workplace before submitting.";
      errorBox.style.display = "block";
      return;
    }

    successMsg.style.display = "block";
    errorBox.style.display = "none";
    errorBox.textContent = "";

    try{
      localStorage.setItem("nhg_ambassador_interest_v1", JSON.stringify({
        fullName: fullName.value.trim(),
        email: email.value.trim(),
        school: school.value.trim(),
        telegram: telegram.value.trim(),
        submittedAt: new Date().toISOString()
      }));
    }catch(_){}

    form.reset();
    submitBtn.disabled = true;

    setTimeout(() => closeModal(), 1200);
  });
</script>

</body>
</html>
